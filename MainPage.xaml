<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Medical_Assistance.MainPage"
             Title="">

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#610000" Offset="0.0" />
            <!-- Dark Red -->
            <GradientStop Color="#1A1A1A" Offset="1.0" />
            <!-- Cinza escuro -->
        </LinearGradientBrush>
    </ContentPage.Background>

    <Border Margin="50,50,50,50"
        StrokeShape="RoundRectangle 40"
        StrokeThickness="5"
        Stroke="AliceBlue"
        BackgroundColor="AliceBlue">

        <Border.Shadow>
            <Shadow Brush="Black"
                Opacity="0.3"
                Radius="10"
                Offset="10,5" />
        </Border.Shadow>

        <Grid RowDefinitions="Auto,Auto,*">
            <!-- Título -->
            <Label Grid.Row="0"
               Text="AGENDAMENTOS"
               HorizontalOptions="Center"
               FontSize="30"
               FontAttributes="Bold"
               Margin="20"
               TextColor="#610000"
               FontFamily="OpenSans"/>

            <!-- Barra de pesquisa + botão -->
            <Grid Grid.Row="1" ColumnDefinitions="*,Auto">
                <Border Grid.Column="0" Stroke="Black" StrokeThickness="1.5" StrokeShape="RoundRectangle 20" Margin="40,30,0,0">
                    <SearchBar 
                    Placeholder="Pesquisar..."
                    Text="{Binding SearchText, Mode=TwoWay}"
                    BackgroundColor="AliceBlue"
                    TextColor="Black"
                    PlaceholderColor="Gray"
                        FontAttributes="Bold"/>
                </Border>

                <VerticalStackLayout Grid.Column="1" Margin="20,30,40,0">
                    <Button Text="Novo Agendamento"                        
                            TextColor="AliceBlue"
                            FontAttributes="Bold"
                            x:Name="botao_novoagendamento"
                            Clicked="botao_novoagendamento_Clicked">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="DarkRed" Offset="0.0" />
                                <!-- Dark Red -->
                                <GradientStop Color="#610000" Offset="1.0" />
                                <!-- Cinza escuro -->
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>

                </VerticalStackLayout>
            </Grid>

            <!-- Lista de itens (ocupa o resto da tela e rola) -->
            <CollectionView Grid.Row="2" 
                        ItemsSource="{Binding FilteredItems}" 
                        Margin="40" CanReorderItems="True">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <StackLayout Padding="5">
                        <Border Padding="5" Background="AliceBlue" Stroke="Black" StrokeShape="RoundRectangle 15">
                            
                            <StackLayout>
                                <Label Text="{Binding}" TextColor="Black" FontAttributes="Bold" FontFamily="OpenSans" FontSize="18"/>
                                <Label Text="{Binding}" TextColor="Black" FontAttributes="Bold" FontFamily="OpenSans" FontSize="18"/>
                                <Label Text="{Binding}" TextColor="Black" FontAttributes="Bold" FontFamily="OpenSans" FontSize="18" HorizontalOptions="End"/>
                            </StackLayout>
                        </Border>
                        </StackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </Border>
    

</ContentPage>
