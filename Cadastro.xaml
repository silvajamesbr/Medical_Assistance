<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Medical_Assistance.Cadastro"
             Title="">
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#610000" Offset="0.0" />
            <!-- Dark Red -->
            <GradientStop Color="#1A1A1A" Offset="1.0" />
            <!-- Cinza escuro -->
        </LinearGradientBrush>
    </ContentPage.Background>

    <Border Margin="50,50,50,50"
     StrokeShape="RoundRectangle 40"
     StrokeThickness="5"
     Stroke="AliceBlue"
     BackgroundColor="AliceBlue">

        <Border.Shadow>
            <Shadow Brush="Black"
             Opacity="0.3"
             Radius="10"
             Offset="10,5" />
        </Border.Shadow>

        <Grid RowDefinitions="Auto,Auto,Auto,*">
            <!-- Título -->
            <Label
            Text="CADASTROS"
            HorizontalOptions="Center"
            FontSize="30"
            FontAttributes="Bold"
            Margin="20"
            TextColor="#610000"
            FontFamily="OpenSans"/>
            <StackLayout Grid.Row="0">
            <Grid ColumnDefinitions="Auto,*">


            <Picker Title="Selecione:" Grid.Column="0"
                    x:Name="pickercadastro"
                    HorizontalOptions="Center"
                    Margin="40,20,40,0"
                    FontSize="18"
                    TextColor="AliceBlue"
                    TitleColor="#610000"
                    BackgroundColor="#610000"
                    FontAttributes="Bold"
                    FontFamily="OpenSansRegular"
                    SelectedIndexChanged="pickercadastro_SelectedIndexChanged">


                <Picker.ItemsSource>
                    <x:Array Type="{x:Type x:String}">
                        <x:String>Paciente</x:String>
                        <x:String>Profissional de Saúde</x:String>
                        <x:String>Estagiário</x:String>
                        <x:String>Serviço</x:String>
                        <x:String>Sala</x:String>
                    </x:Array>
                </Picker.ItemsSource>
            </Picker>
            </Grid>
            </StackLayout>
            <!-- Barra de pesquisa + botão -->
            <Grid Grid.Row="2" ColumnDefinitions="*,Auto">
                <Border Grid.Column="0" Stroke="Black" StrokeThickness="1.5" StrokeShape="RoundRectangle 20" Margin="40,30,0,0">
                    <SearchBar 
                 Placeholder="Pesquisar..."
                 Text="{Binding SearchText, Mode=TwoWay}"
                 BackgroundColor="AliceBlue"
                 TextColor="Black"
                 PlaceholderColor="Gray"
                     FontAttributes="Bold"/>
                </Border>

                <VerticalStackLayout Grid.Column="1" Margin="20,30,40,0">
                    <Button Text="Novo Cadastro"                        
                            TextColor="AliceBlue"
                            x:Name="novoCadastro"
                            Clicked="novoCadastro_Clicked"
                     FontAttributes="Bold">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="DarkRed" Offset="0.0" />
                                <!-- Dark Red -->
                                <GradientStop Color="#610000" Offset="1.0" />
                                <!-- Cinza escuro -->
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>

                </VerticalStackLayout>
            </Grid>

            <CollectionView Grid.Row="3" 
                ItemsSource="{Binding Pacientes}" 
                Margin="40">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <StackLayout Padding="5">
                            <Border Padding="10" Background="AliceBlue" Stroke="Black" StrokeShape="RoundRectangle 15">
                                <StackLayout Spacing="5">

                                    <!-- Nome e CPF -->
                                    <Label Text="{Binding NomeCompleto}" 
                               FontAttributes="Bold"
                               TextColor="Black"
                               FontFamily="OpenSans"
                               FontSize="18"/>
                                    <Label Text="{Binding CPF}" 
                               TextColor="Black"
                               FontFamily="OpenSans"
                               FontSize="16"/>

                                    <!-- Data de Nascimento -->
                                    <Label Text="{Binding DataNascimento, StringFormat='{0:dd/MM/yyyy}'}"
                               TextColor="Black"
                               FontFamily="OpenSans"
                               FontSize="16"/>

                                </StackLayout>
                            </Border>
                        </StackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </Border>
</ContentPage>